var DEF_EXT_VERSION="6.6.9",DEF_DIS_ID="cndtsb",DEF_SUB_DIS_ID="-",DEF_POST_INSTALL_URL="",$pg_namespace={PG_BASE_URL:"http://smartbar.pricegong.com",INJECTED_PATH:"",BROWSER_API_URL:"../browserAppApi.js",OFFERS_FILE_PATH:"/offers/offers.html",WHITE_LISTS_PATH:"/SiteXMLFolder",TOOLBAR_DLG_PATH:"menu_dlg/pg_dlg.html",AGREEMENT_DLG_PATH:"agreement/agree.html",global_msg_key:"pg_global_msg_key",extension_msg_key:"pg_ext_msg_key",offers_msg_key:"pg_offers_msg_key",agreement_msg_key:"pg_agreement_msg_key",
preferences:{PG_LOGGING:!0,PG_LOCAL_HOST:"pgcff.pricegong.com"},SITE_TYPE_SEARCH_ENGINE:1,SITE_TYPE_ECOMMERCE:2,SITE_TYPE_TRAVEL:4,SITE_TYPE_CONDUIT_SE:8,DEFAULT_SITE_TYPE:0,IMPR_TYPE_URL_INVESTIGATION:1,IMPR_TYPE_RESULTS_PAGE_LINK:2,IMPR_TYPE_PRODUCT_PAGE:4,IMPR_TYPE_PRODUCT_PAGE_LINK:8,DEFAULT_IMPR_TYPE:0,SERVICE_TYPE_SHOPPING:1,SERVICE_TYPE_COUPONS:2,SERVICE_TYPE_TRAVEL:4,SERVICE_TYPE_COUPONS_HP:8,DEFAULT_SERVICE_TYPE:0,CATALOG_TYPE_XML:1,CATALOG_TYPE_WL:2,DEFAULT_CATALOG_TYPE:0,DEFAULT_UPGRADE_INFO:{new_ver:"0.0.0",
url:"",span:0,has_new_version:!1},DEFAULT_CLIENT_VERSION:DEF_EXT_VERSION,DEFAULT_USER_GROUP:"",DEFAULT_GOOGLE_PATCH:!0,STG_KEY:{SERVER_LOCATION:"pg_server_location",SETTINGS_URL:"pg_settings_url",LAST_SETTINGS_UPDATE:"pg_last_settings_update",FIRST_RUN:"pg_first_run",FIRST_RUN_TIME:"pg_first_run_time",MACHINE_ID:"pg_machine_id",USER_ID:"pg_user_id",SNOOZE_TIME:"pg_snooze_time",IS_ENABLED:"pg_is_enabled",COUNTRY_CODE:"pg_country_code",LAST_UPGRADE_DISPLAY:"pg_last_upgrade_disp",CATALOG_TYPE:"pg_catalog_type",
CATALOG_MODE:"pg_catalog_mode",CX_SERVER_LOCATION:"pg_cx_server",SETTINGS_UPDATE_INTERVAL:"pg_settings_update_interval",USER_GROUP:"pg_user_group",ACTIVE_SITE_TYPES:"pg_active_site_types",OFFERS_URL:"pg_offers_url",IMPR_TYPE:"pg_impr_type",EXTRA_PARAMS:"pg_extra_params",UPGRADE_INFO:"pg_upgrade_info",CLIENT_VERSION:"pg_client_ver",XML_CATALOGS_URL:"pg_xml_catalogs_url",WL_CATALOGS_URL:"pg_wl_catalogs_url",USER_AGREE:"pg_user_agree",DIST_ID:"pg_dist_id",SUB_DIST_ID:"pg_sub_dist_id",GOOGLE_PATCH:"pg_google_patch",
OPT_ENABLE_SEARCH_ENGINES:"pg_enable_search_engines",OPT_ENABLE_ECOMM_SEARCH:"pg_enable_ecomm_search",POST_INSTALL_ACTION:"pg_post_install_action"},POST_INSTALL_URL:DEF_POST_INSTALL_URL,SNOOZE_MIN_MINUTES:0,SNOOZE_MAX_MINUTES:2880,PAGE_STATE_CREATED:"created",PAGE_STATE_LOADING:"loading",PAGE_STATE_LOADED:"loaded",PAGE_STATE_INIT:"init",PAGE_STATE_READY:"ready",PAGE_STATE_PARSING:"parsing",PAGE_STATE_PARSING_DONE:"parsing_done",PG_EXT_GUID:"{8A9386B4-E958-4c4c-ADF4-8F26DB3E4829}",gen_machine_id:function(){return $pg_namespace.num2hex(Math.random()*
4294967295+1,8)+"-"+$pg_namespace.num2hex(Math.random()*4294967295+1,8)+$pg_namespace.num2hex(Math.random()*65535+1,4)},gen_uuid:function(){return $pg_namespace.num2hex(Math.random()*4294967295+1,8)+"-"+$pg_namespace.num2hex(Math.random()*65535+1,4)+"-"+$pg_namespace.num2hex(Math.random()*65535+1,4)+"-"+$pg_namespace.num2hex(Math.random()*65535+1,4)+"-"+$pg_namespace.num2hex(Math.random()*4294967295+1,8)+$pg_namespace.num2hex(Math.random()*65535+1,4)},pg_date_format:function(a){return a.getUTCDate()+
"-"+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a.getMonth()]+"-"+a.getUTCFullYear()+" "+a.getUTCHours()+":"+a.getUTCMinutes()+":"+a.getUTCSeconds()},loc_from_url:function(a){var b=document.createElement("a");b.href=a;return b},get_url_query_params:function(a){for(var b={},a=$pg_namespace.loc_from_url(a).search.substring(1).split("&"),c=0,d=a.length;c<d;++c){var e=a[c].split("="),f=e.length>1?e[1]:"";b[$pg_namespace.decodeURI(e[0])]=$pg_namespace.decodeURI(f)}return b},
escape:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[']/g,"\\'").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},unescape:function(a){return a.replace(/\\\\/g,"\\").replace(/\\\"/g,'"').replace(/\\\'/g,"'").replace(/\\n/g,"\n").replace(/\\r/g,"\r")},extend:function(a,b){for(var c in b.prototype)typeof a.prototype[c]=="undefined"&&(a.prototype[c]=b.prototype[c]);return a},kv_pairs_from_str:function(a){for(var b=/([^\/?&]+)={1}([^\/?&]+)|([^\/?&]+):{1}([^\/?&]+)|([^\/?&]+)-{1}([^\/?&]+)/g,
c={},d;(d=b.exec(a))!=null;){for(var e=1,f=d.length;e<f&&d[e]==void 0;)e+=2;e<f-1&&(c[d[e]]=d[e+1])}return c},find_value:function(a,b){var c=a.match(RegExp("(^|[/?&])"+b+"([^/?&]+)","i"));return c?c[2]:null},german_accents:"\u00c4\u00e4\u00d6\u00f6\u00dc\u00fc\u00df\u20ac",french_accents:"\u00c0\u00c2\u00c4\u00c8\u00c9\u00ca\u00cb\u00ce\u00cf\u00d4\u0152\u00d9\u00db\u00dc\u0178\u00e0\u00e2\u00e4\u00e8\u00e9\u00ea\u00eb\u00ee\u00ef\u00f4\u0153\u00f9\u00fb\u00fc\u00ff",italian_accents:"\u00c0\u00c8\u00c9\u00cc\u00d2\u00d3\u00d9\u00e0\u00e8\u00e9\u00ec\u00f2\u00f3\u00f9",
spanish_accents:"\u00c1\u00c9\u00cd\u00d3\u00da\u00d1\u00dc\u00e1\u00e9\u00ed\u00f3\u00fa\u00f1\u00fc",all_accents:"\u00c4\u00e4\u00d6\u00f6\u00dc\u00fc\u00df\u20ac\u00c0\u00c2\u00c8\u00c9\u00ca\u00cb\u00ce\u00cf\u00d4\u0152\u00d9\u00db\u0178\u00e0\u00e2\u00e8\u00e9\u00ea\u00eb\u00ee\u00ef\u00f4\u0153\u00f9\u00fb\u00ff\u00cc\u00d2\u00d3\u00ec\u00f2\u00f3\u00c1\u00cd\u00da\u00d1\u00e1\u00ed\u00fa\u00f1",decode_reg_exp:function(a){var a=a.replace(/\\\]/g,"$hide_it_ti_edih$"),b=a.match(/(\[[^\]]*\[[^\]]*\][^\]]*\])/g);
if(b)for(var c=0,d=b.length;c<d;++c)a=a.replace(b[c],b[c].replace(/\][^$]/,"\\]"));a=a.replace("$hide_it_ti_edih$","\\]");b=$pg_namespace;return a.replace("~G~",b.german_accents).replace("~F~",b.french_accents).replace("~I~",b.italian_accents).replace("~S~",b.spanish_accents).replace("~A~",b.all_accents)},unique:function(a){for(var b="",c=0,d=a.length;c<d;++c){var e=a.charAt(c);-1==b.search(RegExp(e))&&(b+=e)}return b},chars2codes:function(a){for(var b="",c=0,d=a.length;c<d;++c)b=b+"\\u"+$pg_namespace.num2hex(a.charCodeAt(c),
4);return b},num2hex:function(a,b){a=Math.round(a);b=Math.round(b);a<0&&(a=4294967295+a+1);for(var c=a.toString(16),b=typeof b=="number"&&b>=0?b:4,d=c.length;d<b;++d)c="0"+c;return c},pack_msg_params:function(){for(var a=Array.prototype.shift.call(arguments),b=[],c=0,d=arguments.length;c<d;++c)b.push(arguments[c]);return{method:a,args:b}},encodeURIComponent:function(a){return encodeURIComponent(a).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},
decodeURI:function(a){try{return decodeURI(a)}catch(b){}try{return unescape(a)}catch(c){}return a},encode:function(a){if(typeof a!="string")return a;for(var b="",c=0,d=a.length;c<d;++c){var e=(c+1)%95,f=a.charCodeAt(c);f>=32&&f<=126&&(f=126-(f-32)+e,f=f<=126?f:32+(f-126-1));b+=String.fromCharCode(f)}return b},decode:function(a){if(typeof a!="string")return a;for(var b="",c=0,d=a.length;c<d;++c){var e=(c+1)%95,f=a.charCodeAt(c);f>=32&&f<=126&&(e=f-e,f=127-(e>=32?e-32:95-(32-e))-1);b+=String.fromCharCode(f)}return b},
add_class:function(a,b){var c=a.className.split(/\s+/),b=b.toLowerCase();if(!c.some(function(a){return a==b}))c.push(b),a.className=c.join(" ")},remove_class:function(a,b){var c=a.className.split(/\s+/),b=b.toLowerCase();c.forEach(function(d,e){if(d.toLowerCase()==b)c.splice(e,1),a.className=c.join(" ")})},has_class:function(a,b){var c=a.className.split(/\s+/),b=b.toLowerCase();return c.some(function(a){return a==b})},str2hex:function(a){if(typeof a!="string")return a;for(var b="",c=0,d=a.length;c<
d;++c){var e=a.charCodeAt(c).toString(16);e.length<2&&(e="0"+e);b+=e}return b},hex2str:function(a){if(typeof a!="string")return a;for(var b="",c=0,d=a.length;c<d;c+=2){var e=a.substr(c,2);b+=String.fromCharCode(parseInt(e,16))}return b},jsonstr:function(a){return JSON.stringify(a,null," ")}};$pg_namespace.pg_ext_inst=$pg_namespace.num2hex(Math.random()*4294967295+1,8);$pg_namespace.extension_msg_key=$pg_namespace.extension_msg_key+"_"+$pg_namespace.pg_ext_inst;$pg_namespace.DEFAULT_SITE_TYPE=$pg_namespace.SITE_TYPE_ECOMMERCE;
$pg_namespace.DEFAULT_IMPR_TYPE=$pg_namespace.IMPR_TYPE_PRODUCT_PAGE|$pg_namespace.IMPR_TYPE_URL_INVESTIGATION;$pg_namespace.DEFAULT_SERVICE_TYPE=$pg_namespace.SERVICE_TYPE_SHOPPING;$pg_namespace.DEFAULT_CATALOG_TYPE=$pg_namespace.CATALOG_TYPE_WL;$pg_namespace.logger=function(){return{init:function(){},debug:function(){},error:function(){}}}();if(typeof $pg_logging==="undefined")var $pg_logging=$pg_namespace.preferences.PG_LOGGING;if(typeof $pg_release_build==="undefined")var $pg_release_build=!1;
var pgLog,pg_logger=$pg_namespace.logger,pg_offers_window={on_load:function(){var a=window.location.search.substring(9,window.location.search.length),a=JSON.parse($pg_namespace.hex2str(a));this.tid=a.tid;this.url=a.url;this.load_offers()},on_unload:function(){this.popup_call("close")},on_activate:function(){try{window.parent.activate()}catch(a){}},load_offers:function(){var a=document.createElement("iframe");a.setAttribute("id","offers_iframe");a.setAttribute("src",this.url);document.body.appendChild(a)},
offers_iframe_set_snooze:function(a,b){this.extension_call("on_set_snooze",a,b)},offers_iframe_set_size:function(a,b){this.popup_call("set_size",a,b)},offers_iframe_hide:function(){this.popup_call("hide")},display_offers:function(){this.popup_call("display")},offers_open_url:function(a,b){this.extension_call("on_open_url_suspended",a,b)},extension_call:function(){for(var a=Array.prototype.shift.call(arguments),b=[],c=0,d=arguments.length;c<d;++c)b.push(arguments[c]);conduit.messaging.sendRequest("backgroundPage",
"bg",JSON.stringify({method:a,tid:this.tid,args:b}))},popup_call:function(){for(var a=Array.prototype.shift.call(arguments),b=[],c=0,d=arguments.length;c<d;++c)b.push(arguments[c]);conduit.messaging.postTopicMessage("popup_"+this.tid,JSON.stringify({method:a,tid:this.tid,args:b}))},on_post_message:function(a){try{this.handle_message(JSON.parse(a.data))}catch(b){}},handle_message:function(a){try{this[a.method]&&this[a.method].apply(this,a.args)}catch(b){}}};
function addListener(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}addListener(window,"load",function(){pg_offers_window.on_load()},!1);addListener(window,"message",function(a){pg_offers_window.on_post_message(a)},!1);addListener(window,"unload",function(){pg_offers_window.on_unload()},!1);addListener(window,"activate",function(a){pg_offers_window.on_activate(a)},!1);
